import{_ as a,c as l,o as i,a6 as e}from"./chunks/framework.DkFL-jqo.js";const g=JSON.parse('{"title":"文件","description":"","frontmatter":{},"headers":[],"relativePath":"八股/操作系统/文件系统.md","filePath":"八股/操作系统/文件系统.md"}'),t={name:"八股/操作系统/文件系统.md"},o=e('<h1 id="文件" tabindex="-1">文件 <a class="header-anchor" href="#文件" aria-label="Permalink to &quot;文件&quot;">​</a></h1><h2 id="文件逻辑结构" tabindex="-1">文件逻辑结构 <a class="header-anchor" href="#文件逻辑结构" aria-label="Permalink to &quot;文件逻辑结构&quot;">​</a></h2><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241223170212199.png" alt="image-20241223170212199"></p><p>三种文件结构：</p><ul><li>字节序列</li><li>记录序列</li><li>树</li></ul><h2 id="文件类型" tabindex="-1">文件类型 <a class="header-anchor" href="#文件类型" aria-label="Permalink to &quot;文件类型&quot;">​</a></h2><p>普通文件</p><ul><li>ASCII文件、二进制文件</li></ul><p>目录文件</p><p>特殊文件</p><ul><li>字符、块</li></ul><h2 id="文件存取" tabindex="-1">文件存取 <a class="header-anchor" href="#文件存取" aria-label="Permalink to &quot;文件存取&quot;">​</a></h2><p>顺序存取</p><p>随机存取</p><h1 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-label="Permalink to &quot;目录&quot;">​</a></h1><h2 id="一级目录系统" tabindex="-1">一级目录系统 <a class="header-anchor" href="#一级目录系统" aria-label="Permalink to &quot;一级目录系统&quot;">​</a></h2><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110018952.png" alt="image-20241226110018952"></p><h2 id="两层目录系统" tabindex="-1">两层目录系统 <a class="header-anchor" href="#两层目录系统" aria-label="Permalink to &quot;两层目录系统&quot;">​</a></h2><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110032944.png" alt="image-20241226110032944"></p><h2 id="层次目录系统" tabindex="-1">层次目录系统 <a class="header-anchor" href="#层次目录系统" aria-label="Permalink to &quot;层次目录系统&quot;">​</a></h2><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110053988.png" alt="image-20241226110053988"></p><h1 id="文件系统的实现" tabindex="-1">文件系统的实现 <a class="header-anchor" href="#文件系统的实现" aria-label="Permalink to &quot;文件系统的实现&quot;">​</a></h1><h2 id="文件的实现" tabindex="-1">文件的实现 <a class="header-anchor" href="#文件的实现" aria-label="Permalink to &quot;文件的实现&quot;">​</a></h2><h3 id="连续结构" tabindex="-1">连续结构 <a class="header-anchor" href="#连续结构" aria-label="Permalink to &quot;连续结构&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110742873.png" alt="image-20241226110742873"></p><h3 id="链表结构" tabindex="-1">链表结构 <a class="header-anchor" href="#链表结构" aria-label="Permalink to &quot;链表结构&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110801601.png" alt="image-20241226110801601"></p><p>在内存中的链表结构：<img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110916593.png" alt="image-20241226110916593"></p><h3 id="索引结点结构" tabindex="-1">索引结点结构 <a class="header-anchor" href="#索引结点结构" aria-label="Permalink to &quot;索引结点结构&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226110956407.png" alt="image-20241226110956407"></p><h4 id="多级索引的物理结构" tabindex="-1">多级索引的物理结构 <a class="header-anchor" href="#多级索引的物理结构" aria-label="Permalink to &quot;多级索引的物理结构&quot;">​</a></h4><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226111102590.png" alt="image-20241226111102590"></p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226111317226.png" alt="image-20241226111317226"></p><blockquote><p>二次间接索引，第一个索引表中的索引块存储的是指向其他索引块的地址</p></blockquote><h3 id="文件系统的几种物理结构分析" tabindex="-1">文件系统的几种物理结构分析 <a class="header-anchor" href="#文件系统的几种物理结构分析" aria-label="Permalink to &quot;文件系统的几种物理结构分析&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226111752250.png" alt="image-20241226111752250"></p><h2 id="目录的实现" tabindex="-1">目录的实现 <a class="header-anchor" href="#目录的实现" aria-label="Permalink to &quot;目录的实现&quot;">​</a></h2><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226111930986.png" alt="image-20241226111930986"></p><p>(a) 简单目录实现：将文件名与文件属性作为一个目录项 放在一起。即包含固定大小的目录项，在目录项中有 磁盘地址和属性。</p><p>(b) 索引目录实现：将文件名与文件属性分开，每个目录项只有文件名和索引节点。</p><h3 id="目录实现的问题" tabindex="-1">目录实现的问题 <a class="header-anchor" href="#目录实现的问题" aria-label="Permalink to &quot;目录实现的问题&quot;">​</a></h3><ol><li>可变长文件名问题</li><li>文件共享问题 <ul><li>有共享文件的文件系统<img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226112641408.png" alt="image-20241226112641408"></li></ul></li></ol><h3 id="在目录中处理长文件名的两种方法" tabindex="-1">在目录中处理长文件名的两种方法 <a class="header-anchor" href="#在目录中处理长文件名的两种方法" aria-label="Permalink to &quot;在目录中处理长文件名的两种方法&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226112244100.png" alt="image-20241226112244100"></p><p>(a) 在行中</p><p>(b) 在堆中</p><h3 id="共享文件" tabindex="-1">共享文件 <a class="header-anchor" href="#共享文件" aria-label="Permalink to &quot;共享文件&quot;">​</a></h3><h4 id="硬链接-共享索引节点" tabindex="-1">硬链接（共享索引节点） <a class="header-anchor" href="#硬链接-共享索引节点" aria-label="Permalink to &quot;硬链接（共享索引节点）&quot;">​</a></h4><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226112849394.png" alt="image-20241226112849394"></p><p>(a) 连接之前的状况</p><p>(b) 创建连接之后</p><p>(c) 当所有者删除文件后</p><h4 id="软链接-符号链接" tabindex="-1">软链接（符号链接） <a class="header-anchor" href="#软链接-符号链接" aria-label="Permalink to &quot;软链接（符号链接）&quot;">​</a></h4><ol><li>系统为共享文件在共享目录下建立新的文件（类型LINK）</li><li>新建立LINK文件内容为共享文件的链接， 即共享文件路径名</li><li>访问共享文件时，先找到该LINK文件，根 据其中的链接访问该文件</li><li>eg:桌面快捷方式</li></ol><h2 id="文件系统的可靠性" tabindex="-1">文件系统的可靠性 <a class="header-anchor" href="#文件系统的可靠性" aria-label="Permalink to &quot;文件系统的可靠性&quot;">​</a></h2><h3 id="文件系统备份" tabindex="-1">文件系统备份 <a class="header-anchor" href="#文件系统备份" aria-label="Permalink to &quot;文件系统备份&quot;">​</a></h3><p>备份原因:</p><ul><li>灾备</li><li>数据丢失</li></ul><p>备份策略：(全量, 增量)</p><p>转储：</p><ul><li>物理转储</li><li>逻辑转储</li></ul><h3 id="文件系统一致性" tabindex="-1">文件系统一致性 <a class="header-anchor" href="#文件系统一致性" aria-label="Permalink to &quot;文件系统一致性&quot;">​</a></h3><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226115417846.png" alt="image-20241226115417846"></p><p>文件系统状态：</p><ul><li>一致（a）</li><li>块丢失 (b)</li><li>空闲表中有重复块 （c）</li><li>重复数据块 (d)</li></ul><h2 id="文件系统性能" tabindex="-1">文件系统性能 <a class="header-anchor" href="#文件系统性能" aria-label="Permalink to &quot;文件系统性能&quot;">​</a></h2><ol><li><p>高速缓存</p></li><li><p>块提前读</p><ul><li>若当前访问块k，提前预读k+1块</li><li>仅仅适用于顺序读取的文件</li></ul></li><li><p>减少磁盘臂运动</p><ul><li>可能顺序存取的块放在一起（位图，块簇）</li><li>i节点分散存放</li><li><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241226120125404.png" alt="image-20241226120125404"></li></ul></li></ol><h3 id="磁盘碎片整理" tabindex="-1">磁盘碎片整理 <a class="header-anchor" href="#磁盘碎片整理" aria-label="Permalink to &quot;磁盘碎片整理&quot;">​</a></h3><ul><li>操作系统初始安装后，从磁盘的开始位 置连续安装了程序与文件。</li><li>随着文件被不断创建与删除，磁盘空间 会产生很多碎片，影响性能。</li><li>磁盘性能的恢复方法：移动文件使他们相邻，并把所有的空闲空间放在一个或 多个大的连续区域内。</li></ul><h2 id="文件操作" tabindex="-1">文件操作 <a class="header-anchor" href="#文件操作" aria-label="Permalink to &quot;文件操作&quot;">​</a></h2><ol><li>Create 2. Delete 3. Open 4. Close 5. Read 6. Write 7. Append 8. Seek 9. Get attributes 10.Set Attributes 11.Rename</li></ol><h2 id="思考题" tabindex="-1">思考题 <a class="header-anchor" href="#思考题" aria-label="Permalink to &quot;思考题&quot;">​</a></h2><ol><li>文件的定义</li><li><strong>文件类型</strong><ul><li><a href="#文件类型">文件类型</a></li></ul></li><li>文件系统的功能</li><li>文件系统的结构</li><li>文件的逻辑结构和物理结构</li><li><strong>Unix 的多级索引结构</strong><ul><li><a href="#多级索引的物理结构">多级索引的物理结构</a></li></ul></li><li><strong>文件存储空间的管理（空闲块管理）</strong></li><li>文件目录和检索</li><li>文件控制块和目录文件</li><li>文件保护：存取控制表和用户权限表</li><li>打开文件：系统打开文件表、用户打开文件表、文件描述字fd</li><li>改善文件系统性能的三种方法 <ul><li><a href="#文件系统性能">文件系统性能</a></li></ul></li><li><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20250107133048661.png" alt="image-20250107133048661"><ul><li>D*F&lt;B(位图的空间需求B位)</li><li>16*F&lt;B–&gt;F/B&lt;1/16</li></ul></li></ol><h2 id="思考题-2" tabindex="-1">思考题 2 <a class="header-anchor" href="#思考题-2" aria-label="Permalink to &quot;思考题 2&quot;">​</a></h2><ol><li>影响系统缺页率的因素有哪些？ <ul><li>页面置换算法的选择、工作集模型的大小与变化速度、页面大小的设定、程序本身的特性和大小、分配给程序的物理页面数、内存访问模式、系统负载情况、预取和缓存机制的有效性以及多道程序设计中的策略。这些因素相互作用，共同决定了程序在运行过程中发生缺页中断的频率。</li></ul></li><li>文件的逻辑结构有哪两种？ <ul><li>序列(字节序列、记录序列)、树。</li></ul></li><li>文件的存取方式分别是哪些？ <ul><li>顺序存取、随机存取</li></ul></li><li>文件的连续结构、索引结构和串联结构，分别适合怎样的文件存取方式？ <ul><li>连续结构适合顺序存取和随机存取。索引结构适合顺序和随机存取。串联结构适合顺序存取。</li><li><a href="#文件系统的几种物理结构分析">文件系统的几种物理结构分析</a></li></ul></li><li>我们对一个文件进行访问前，通常首先要调用open函数，你认为这个open函数本质上应该完成怎样的操作？ <ul><li>调用open函数的本质操作是，首先验证文件路径的合法性以及调用进程的访问权限，然后为打开的文件在操作系统层面分配一个文件描述符，并根据指定的模式设置文件的状态标志，接着在操作系统的文件表中为该文件创建一个表项以记录其元数据，同时将文件指针定位到适当的位置，最后返回文件描述符或句柄供后续操作使用，如果在过程中遇到错误，则返回错误指示并设置错误信息。</li></ul></li><li>文件的两种目录组织结构分别是？分析不同目录组织结构的特点。 <ul><li>平面文件目录结构和层次化文件目录结构。平面文件目录结构简单，所有文件存放在同一目录下，但随着文件数量增加，管理变得困难，且文件访问效率低下。而层次化文件目录结构将文件和目录组织成树状结构，具有结构化、命名空间划分、访问效率高、可扩展性强和安全性高等特点，更适用于文件数量较多的情况，因此成为现代操作系统中的主流组织方式。</li></ul></li><li>实现文件共享的方式有哪些？ <ul><li>硬链接（共享索引节点）和软链接（符号链接）。</li></ul></li><li>如何保证文件的可靠性 <ul><li>1）文件备份：全量、增量；块拷贝、逻辑备份。2）文件的一致性：块一致性、文件一致性。</li></ul></li></ol>',75),r=[o];function h(n,s,c,p,u,m){return i(),l("div",null,r)}const b=a(t,[["render",h]]);export{g as __pageData,b as default};
