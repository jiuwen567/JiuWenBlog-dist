<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>九问Blog</title>
    <meta name="description" content="欢迎访问九问Blog！分享一些Python全栈开发以及爬虫技术，希望对你有所帮助">
    <meta name="generator" content="VitePress v1.3.3">
    <link rel="preload stylesheet" href="/assets/style.mqioYcp2.css" as="style">
    
    <script type="module" src="/assets/app.BOmfOwIb.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.Bjz-lml3.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DkFL-jqo.js">
    <link rel="modulepreload" href="/assets/八股_操作系统_进程与线程.md.C-Cv6gvo.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>九问Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E5%B7%A5%E5%85%B7/markdown-examples.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/vitepress/GithubPages%E9%83%A8%E7%BD%B2.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>项目部署</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Python%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Python高级编程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E7%88%AC%E8%99%AB/%E6%8A%93%E5%8C%85.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>爬虫</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Linux/Linux%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Linux</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E6%B5%8B%E5%BC%80/unittest.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>测开</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/HTML/HTML%E5%9F%BA%E7%A1%80.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>前端三件套</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8F%8A%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%A6%82%E8%BF%B0.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>八股</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Vue3/axios.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Vue3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>性能测试</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="切换到深色模式" aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jiuwen567" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/jiuwen567" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1724307958358" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4234" width="200" height="200"><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m284.8 313.6c0 12.8-12.8 25.6-25.6 25.6H416c-41.6 0-76.8 35.2-76.8 76.8v243.2c0 12.8 12.8 25.6 25.6 25.6h240c41.6 0 76.8-35.2 76.8-76.8v-12.8c0-12.8-12.8-25.6-25.6-25.6H480c-12.8 0-25.6-12.8-25.6-25.6v-64c0-12.8 12.8-25.6 25.6-25.6h291.2c12.8 0 25.6 12.8 25.6 25.6v144c0 92.8-76.8 169.6-169.6 169.6H252.8c-12.8 0-25.6-12.8-25.6-25.6V412.8C227.2 310.4 310.4 224 416 224h355.2c12.8 0 25.6 12.8 25.6 25.6v64z" fill="#B32225" p-id="4235"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>主题</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="切换到深色模式" aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jiuwen567" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/jiuwen567" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1724307958358" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4234" width="200" height="200"><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m284.8 313.6c0 12.8-12.8 25.6-25.6 25.6H416c-41.6 0-76.8 35.2-76.8 76.8v243.2c0 12.8 12.8 25.6 25.6 25.6h240c41.6 0 76.8-35.2 76.8-76.8v-12.8c0-12.8-12.8-25.6-25.6-25.6H480c-12.8 0-25.6-12.8-25.6-25.6v-64c0-12.8 12.8-25.6 25.6-25.6h291.2c12.8 0 25.6 12.8 25.6 25.6v144c0 92.8-76.8 169.6-169.6 169.6H252.8c-12.8 0-25.6-12.8-25.6-25.6V412.8C227.2 310.4 310.4 224 416 224h355.2c12.8 0 25.6 12.8 25.6 25.6v64z" fill="#B32225" p-id="4235"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>操作系统</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8F%8A%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%A6%82%E8%BF%B0.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>操作系统安全及虚拟化技术概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>存储管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>操作系统概述及基本概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>文件系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AD%BB%E9%94%81.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>死锁</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>输入输出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>进程与线程</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>汇编</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>寄存器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>寻址方式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数据传送指令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>前置知识</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E4%B8%B2%E6%8C%87%E4%BB%A4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>串指令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E5%AE%8F%E6%B1%87%E7%BC%96.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>宏汇编</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>程序设计综合</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E4%B8%8E%E7%A7%BB%E4%BD%8D%E6%8C%87%E4%BB%A4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>逻辑运算与移位指令</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>网安</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/%E5%85%AB%E8%82%A1/%E7%BD%91%E5%AE%89/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>网络安全</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _%E5%85%AB%E8%82%A1_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F_%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B" data-v-39a288b8><div><h2 id="并发vs并行" tabindex="-1">并发vs并行 <a class="header-anchor" href="#并发vs并行" aria-label="Permalink to &quot;并发vs并行&quot;">​</a></h2><p>并发：两个或多个事件在同一个<strong>时间间隔</strong>之内同时发生</p><p>并行：两个或多个事件在<strong>同一个时刻</strong>同时发生</p><h2 id="进程vs程序" tabindex="-1">进程VS程序 <a class="header-anchor" href="#进程vs程序" aria-label="Permalink to &quot;进程VS程序&quot;">​</a></h2><ul><li>进程是动态的，而程序是静态的</li><li>进程可以并发，而程序则没有</li><li>进程是资源竞争的基本单位</li></ul><p>联系：一个程序可以生成多个不同的进程</p><h2 id="进程" tabindex="-1">进程 <a class="header-anchor" href="#进程" aria-label="Permalink to &quot;进程&quot;">​</a></h2><h3 id="进程的层次结构" tabindex="-1">进程的层次结构 <a class="header-anchor" href="#进程的层次结构" aria-label="Permalink to &quot;进程的层次结构&quot;">​</a></h3><ul><li>系统中除根进程外，每个进程都有且只有一个父进程</li><li>每个子进程均由它的父进程创建</li><li>一个父进程可以有多个子进程</li></ul><h3 id="进程创建原因" tabindex="-1">进程创建原因 <a class="header-anchor" href="#进程创建原因" aria-label="Permalink to &quot;进程创建原因&quot;">​</a></h3><ul><li>系统初始化</li><li>正在执行的进程调用创建进程的系统调用</li><li>用户请求创建一个进程</li><li>批处理作业的初始化</li></ul><h3 id="进程的终止" tabindex="-1">进程的终止 <a class="header-anchor" href="#进程的终止" aria-label="Permalink to &quot;进程的终止&quot;">​</a></h3><ul><li>正常退出(voluntary)</li><li>出错退出(voluntary)</li><li>严重错误(involuntary)</li><li>被其他进程杀死(involuntary)</li></ul><h3 id="守护进程" tabindex="-1">守护进程 <a class="header-anchor" href="#守护进程" aria-label="Permalink to &quot;守护进程&quot;">​</a></h3><blockquote><p>Daemons（守护进程）--Processes that stay in the background to handle some activity such as email, Web pages, news,printing,and son on are called daemons.</p></blockquote><h3 id="进程实现-静态描述" tabindex="-1">进程实现（静态描述） <a class="header-anchor" href="#进程实现-静态描述" aria-label="Permalink to &quot;进程实现（静态描述）&quot;">​</a></h3><h4 id="进程控制块pcb" tabindex="-1">进程控制块ＰＣＢ <a class="header-anchor" href="#进程控制块pcb" aria-label="Permalink to &quot;进程控制块ＰＣＢ&quot;">​</a></h4><ul><li><p>用来标识进程存在 于系统中的唯一的实体，部分或全部常驻内存</p></li><li><p>系统用ＰＣＢ反映进程的动态特征，</p><p>内容包括：</p><ul><li>描述信息：进程名（标识号），用户名（标识号），家族链</li><li>控制信息：状态，优先级，内存始址，计时，通信信息</li><li>资源管理信息：内存、设备等信息 ．ＣＰＵ现场保护机构：寄存器</li></ul></li></ul><h5 id="主要字段" tabindex="-1">主要字段 <a class="header-anchor" href="#主要字段" aria-label="Permalink to &quot;主要字段&quot;">​</a></h5><p><strong><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241205180143343.png" alt="image-20241205180143343"></strong></p><h3 id="进程状态及其转换" tabindex="-1">进程状态及其转换 <a class="header-anchor" href="#进程状态及其转换" aria-label="Permalink to &quot;进程状态及其转换&quot;">​</a></h3><ul><li>运行态：正在使用CPU</li><li>就绪态：可运行，指获取了除CPU之外的所有资源的进程状态。</li><li>阻塞态：不可运行，且只能由其他外部事件发生而唤醒的状态</li></ul><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241205180650873.png" alt="image-20241205180650873"></p><h3 id="进程控制" tabindex="-1">进程控制 <a class="header-anchor" href="#进程控制" aria-label="Permalink to &quot;进程控制&quot;">​</a></h3><p>系统使用具有特定功能的程序段来创建，撤消进程及完成进程之间状态转换</p><h4 id="原语" tabindex="-1">原语 <a class="header-anchor" href="#原语" aria-label="Permalink to &quot;原语&quot;">​</a></h4><blockquote><p>a single , indivisible atomic action （系统态下执行的某些具有特定功能的程序段）</p></blockquote><ul><li>机器指令级：不允许中断</li><li>功能级：不允许并发执行</li></ul><h5 id="用于进程控制的原语" tabindex="-1">用于进程控制的原语 <a class="header-anchor" href="#用于进程控制的原语" aria-label="Permalink to &quot;用于进程控制的原语&quot;">​</a></h5><p>创建原语，撤消原语，阻塞原语，唤醒原语</p><h2 id="线程" tabindex="-1">线程 <a class="header-anchor" href="#线程" aria-label="Permalink to &quot;线程&quot;">​</a></h2><p>线程是轻量级的进程，它是一个进程内的基本调度单位，有自己的程序计数器、寄存器及堆栈。</p><h3 id="多线程与多进程" tabindex="-1">多线程与多进程 <a class="header-anchor" href="#多线程与多进程" aria-label="Permalink to &quot;多线程与多进程&quot;">​</a></h3><ul><li><p>多线程系统允许多个线程共享一个进程的地址空间、打开文件、全局变量等资源。</p></li><li><p>多进程系统允许多个进程共享物理内存、磁盘、打印机等资源。</p></li></ul><h3 id="线程与进程" tabindex="-1">线程与进程 <a class="header-anchor" href="#线程与进程" aria-label="Permalink to &quot;线程与进程&quot;">​</a></h3><ul><li><p>进程是资源管理的基本单位</p></li><li><p>线程是调度的基本单位</p></li></ul><h3 id="引入线程的原因" tabindex="-1">引入线程的原因 <a class="header-anchor" href="#引入线程的原因" aria-label="Permalink to &quot;引入线程的原因&quot;">​</a></h3><ul><li>伪并行，进一步提高并发度</li><li>更小的系统开销</li><li>更高的性能</li><li>有利于在多CPU系统中实现真正的并行</li></ul><h2 id="进程通信" tabindex="-1">进程通信 <a class="header-anchor" href="#进程通信" aria-label="Permalink to &quot;进程通信&quot;">​</a></h2><h3 id="并发执行的进程间相互制约关系" tabindex="-1">并发执行的进程间相互制约关系 <a class="header-anchor" href="#并发执行的进程间相互制约关系" aria-label="Permalink to &quot;并发执行的进程间相互制约关系&quot;">​</a></h3><ul><li>间接制约：诸进程对共享资源的使用通过系统来协调，使得进程间执行速度相互影响。（进程间互斥）</li><li>直接制约：诸进程自行使用共享资源或由进程合作引起，某一进程直接通过某机制发消息给其他进程，从而直接影响其他进程的执行。（进程间同步）</li></ul><h3 id="基本概念" tabindex="-1">基本概念 <a class="header-anchor" href="#基本概念" aria-label="Permalink to &quot;基本概念&quot;">​</a></h3><ul><li>临界资源（竞争条件）：一次只允许一个进程使用的资源</li><li>临界区：在每个进程中，访问临界资源的那部分代码（那段程序）</li></ul><h3 id="进程通信方式" tabindex="-1">进程通信方式 <a class="header-anchor" href="#进程通信方式" aria-label="Permalink to &quot;进程通信方式&quot;">​</a></h3><ul><li><p>低级通信：同步&amp;互斥</p></li><li><p>高级通信：管道通信、消息队列、共享内存、网络通信</p></li></ul><h2 id="互斥" tabindex="-1">互斥 <a class="header-anchor" href="#互斥" aria-label="Permalink to &quot;互斥&quot;">​</a></h2><blockquote><p>不允许两个以上的共享该资源的并发进程同时进入临界区，称为互斥</p></blockquote><h3 id="并发进程互斥执行准则" tabindex="-1">并发进程互斥执行准则 <a class="header-anchor" href="#并发进程互斥执行准则" aria-label="Permalink to &quot;并发进程互斥执行准则&quot;">​</a></h3><ul><li>不假设各并发进程的相对执行速度</li><li>出于临界区外的进程不能阻止其他进程进入临界区</li><li>任何时刻只允许一个进程处于临界区中</li><li>不能使进程在临界区外永远等待</li></ul><h3 id="互斥的实现" tabindex="-1">互斥的实现 <a class="header-anchor" href="#互斥的实现" aria-label="Permalink to &quot;互斥的实现&quot;">​</a></h3><ol><li>关中断法：每个进程进入临界区后先关中断，离开前开中断</li></ol><ul><li>缺点：系统可能终止 ．多CPU时，无用</li></ul><ol start="2"><li>加锁法：用锁变量来表示临界区是否可用</li></ol><ul><li>加锁后的临界区描述如下：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>lock(key[s]) </span></span>
<span class="line"><span>&lt;临界区&gt;  </span></span>
<span class="line"><span>unlock(key[s])    //s为临界区类名 //key[s]为锁变量，为1表示临界区 //可用，为0表示临界区不能使用</span></span></code></pre></div><ul><li><p>eg:</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    then </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s]){</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    L1 : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L2:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[s]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>缺点：</p><ul><li>不断循环测试，CPU费时</li><li>存在不公平现象</li></ul></li></ul><ol start="3"><li><p>严格的轮转法：用标志严格控制轮流使用临界区</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(turn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   //wait</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> critical_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> turn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> noncritical_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(turn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   //wait</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> critical_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> turn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> noncritical_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div></li></ol><ul><li>缺点：当一个进程比另一进程慢很多时不好</li></ul><ol start="4"><li><p>Peterson解决方案</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> False</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> True</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 两个进程</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> turn;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> interested</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[N];</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 谁想进入临界区，对应位置置为1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> enter_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> other;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    other </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    interested</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[process] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> True;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 该进程想要申请得到资源</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    turn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // 倾向于该进程</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (turn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> interested</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[other] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> True);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//其他进程想要进入时阻塞</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> leave_region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    interested</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[process] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> False;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>turn</code> 的作用是保证两个进程在同时请求进入临界区时能按照顺序依次进入，从而避免死锁和饥饿，确保系统的公平性。</li></ul></li><li><p>信号量法</p><ul><li><p>信号量：是ＯＳ中表示资源的物理实体，是一个与队列相关的 整型变量，其值仅由down，up原语改变</p></li><li><p>信号量的表示意义： 设s为信号量，则：</p><ul><li><p>当s&gt;=0时，表示可供并发进程使用的资源实体数</p></li><li><p>当s &lt; 0时，表示正在等待使用资源的进程数</p></li></ul></li><li><p>Ｐ、Ｖ原语的操作等同down、up原语操作</p></li><li><p>信号量实现互斥</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//设一个互斥的信号量sem</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//描述：S为临界区的类名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ＰA：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sem)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sem)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> …</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ＰB：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sem)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sem)</span></span></code></pre></div></li></ul></li></ol><h2 id="管程" tabindex="-1">管程 <a class="header-anchor" href="#管程" aria-label="Permalink to &quot;管程&quot;">​</a></h2><ul><li>一种更为高级的同步原语，更便于使用，管程的互斥由编译 器负责，使用者只需将所有临界区转换为管程即可。</li><li>一个管程是由过程、条件变量及数据结构等组成的特殊模块 或软件包。进程仅能通过管程访问其中的数据结构。</li><li>管程的特性：任一时刻管程中只能有一个活跃进程</li></ul><h2 id="进程同步" tabindex="-1">进程同步 <a class="header-anchor" href="#进程同步" aria-label="Permalink to &quot;进程同步&quot;">​</a></h2><blockquote><p>异步环境下，一组并发进程因直接制约而相互发送消息， 相互合作，相互等待，使各进程按一定速度执行的过程</p></blockquote><h3 id="同步的实现" tabindex="-1">同步的实现 <a class="header-anchor" href="#同步的实现" aria-label="Permalink to &quot;同步的实现&quot;">​</a></h3><ol><li><p>消息名法</p><blockquote><p>为同步进程间发送的事件或消息赋予一个唯一的消息名，</p><p>用：</p><p>wait（）表示进程等待合作进程发来的消息)</p><p>signal（）表示向合作进程发送消息</p></blockquote><p>描述：</p><ul><li><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//设消息名Bufempty表示Buf为空，Buffull表示Buf满</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//初始化：Bufempty=true,  Buffull=false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pc:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A:    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Bufempty)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">caculate</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Bufempty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffull)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Goto  A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pp:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B:    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffull)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">print </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Buffull </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Bufempty)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Goto  B</span></span></code></pre></div></li></ul></li><li><p>信号量法</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//SA表示进程Pc的资源信号量，即buf为空，可放数据，初始化为SA=1；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//SB表示buf中有数据，初始化为SB=0；</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pc:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> A:  caculate  next  number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">V</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SB)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SA)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  then  </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Pc) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pp:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> B:    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SB)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> print </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> V</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SA)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> print the last number</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  then </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Pp)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  goto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  B</span></span></code></pre></div></li></ol><h2 id="进程高级通信" tabindex="-1">进程高级通信 <a class="header-anchor" href="#进程高级通信" aria-label="Permalink to &quot;进程高级通信&quot;">​</a></h2><blockquote><p>消息传递</p><ol><li>引入:</li></ol><ul><li><p>信号量需要编程语言支持.</p></li><li><p>信号量在网络环境下不可用 •</p></li></ul><ol start="2"><li>实现:</li></ol><ul><li>send(destination, &amp;message)</li><li>receive(source, &amp;message)</li></ul></blockquote><h3 id="用n条消息实现的生产者-消费者问题" tabindex="-1">用N条消息实现的生产者-消费者问题 <a class="header-anchor" href="#用n条消息实现的生产者-消费者问题" aria-label="Permalink to &quot;用N条消息实现的生产者-消费者问题&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message m;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> produce_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 生成一个商品</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        receive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(consumer, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 从消费者接收消息（消费者可能发送一个空的消息，表示消费者准备好接收新的商品）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        build_message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m,item);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用生成的商品构建消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(consumer, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //发送消息给消费者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message m;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(producer,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 向生产者发送初始消息，可能是空消息，表示消费者准备好了</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        receive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(producer, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 从生产者接收商品消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> extract_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 从消息中提取商品</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(producer,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 消费者发送消息给生产者，可能表示消费者可以继续消费</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        consume_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   //消费商品</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="生产者-消费者问题" tabindex="-1">生产者-消费者问题 <a class="header-anchor" href="#生产者-消费者问题" aria-label="Permalink to &quot;生产者-消费者问题&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> semaphore;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore mutex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore empty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore full </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> produce_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">empty);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //进入临界区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        insert_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //放入数据到缓冲区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 离开临界区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">full);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">full);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //进入临界区</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> remove_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //从缓冲区取数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 离开临界区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">empty);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        consume_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //消费商品</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="哲学家就餐问题" tabindex="-1">哲学家就餐问题 <a class="header-anchor" href="#哲学家就餐问题" aria-label="Permalink to &quot;哲学家就餐问题&quot;">​</a></h3><blockquote><p><strong>哲学家就餐问题</strong>是经典的并发与同步问题，通常用来描述多个进程如何共享资源的情景。在这个问题中，哲学家们坐在餐桌旁，他们的任务是思考、拿起两根筷子（共享资源），然后吃饭。哲学家们必须交替进行思考、吃饭、和放下筷子(叉子)。然而，如果哲学家们不遵循适当的规则，就会出现以下几种问题：</p><ol><li><strong>死锁（Deadlock）</strong>：所有的哲学家都拿着一根筷子并且等待另一根筷子，这样他们就都无法继续吃饭。</li><li><strong>饥饿（Starvation）</strong>：某些哲学家永远不能获得足够的筷子来吃饭，而是被其他哲学家不断抢占。</li><li><strong>竞态条件（Race Condition）</strong>：不同哲学家对共享资源的访问会出现冲突，导致不一致的状态。</li></ol></blockquote><h4 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h4><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241208115728710.png" alt="image-20241208115728710"></p><ul><li><p><strong>资源</strong>：每个哲学家有两根筷子（叉子），坐在圆桌旁。</p></li><li><p>任务</p><p>：每个哲学家反复进行以下操作：</p><ul><li>思考（Think）</li><li>拿起两根筷子（Pick up both chopsticks）</li><li>吃饭（Eat）</li><li>放下筷子（Put down both chopsticks）</li></ul></li><li><p><strong>条件</strong>：每根筷子是共享的，任何两位哲学家不能同时使用同一根筷子。</p></li></ul><h4 id="错误的做法" tabindex="-1">错误的做法 <a class="header-anchor" href="#错误的做法" aria-label="Permalink to &quot;错误的做法&quot;">​</a></h4><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //哲学家数量</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> philosopher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //i:哲学家编号 from 0 to 4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        think</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //拿左右两边的筷子</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        eat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>两个哲学家同时试图拿起两根筷子时，死锁会发生!!</p><h5 id="死锁的产生" tabindex="-1">死锁的产生： <a class="header-anchor" href="#死锁的产生" aria-label="Permalink to &quot;死锁的产生：&quot;">​</a></h5><p>死锁发生的条件是<strong>循环等待</strong>，即一组进程在等待资源时，形成一个环路。具体来说：</p><ol><li>假设所有哲学家同时开始尝试拿筷子。</li><li>哲学家 <code>0</code> 先拿起了 <strong>左边的筷子 <code>fork[0]</code></strong>。</li><li>然后，哲学家 <code>1</code> 也拿起了 <strong>左边的筷子 <code>fork[1]</code></strong>，哲学家 <code>2</code> 拿起了 <strong>左边的筷子 <code>fork[2]</code></strong>，依此类推。</li><li>然后，哲学家们开始尝试拿右边的筷子： <ul><li>哲学家 <code>0</code> 尝试拿 <strong>右边的筷子 <code>fork[1]</code></strong>（被哲学家 <code>1</code> 拿走了）。</li><li>哲学家 <code>1</code> 尝试拿 <strong>右边的筷子 <code>fork[2]</code></strong>（被哲学家 <code>2</code> 拿走了）。</li><li>以此类推，直到哲学家 <code>4</code> 尝试拿 <strong>右边的筷子 <code>fork[0]</code></strong>（被哲学家 <code>0</code> 拿走了）。</li></ul></li></ol><h5 id="形成循环等待" tabindex="-1">形成循环等待： <a class="header-anchor" href="#形成循环等待" aria-label="Permalink to &quot;形成循环等待：&quot;">​</a></h5><p>此时，所有哲学家都已经拿到了 <strong>一根筷子</strong>，但每个哲学家都在等待<strong>另一根筷子</strong>。具体来说：</p><ul><li>哲学家 <code>0</code> 拿了 <code>fork[0]</code>，但在等待 <code>fork[1]</code>。</li><li>哲学家 <code>1</code> 拿了 <code>fork[1]</code>，但在等待 <code>fork[2]</code>。</li><li>哲学家 <code>2</code> 拿了 <code>fork[2]</code>，但在等待 <code>fork[3]</code>。</li><li>哲学家 <code>3</code> 拿了 <code>fork[3]</code>，但在等待 <code>fork[4]</code>。</li><li>哲学家 <code>4</code> 拿了 <code>fork[4]</code>，但在等待 <code>fork[0]</code>。</li></ul><blockquote><h5 id="死锁发生的条件" tabindex="-1"><strong>死锁发生的条件</strong>： <a class="header-anchor" href="#死锁发生的条件" aria-label="Permalink to &quot;**死锁发生的条件**：&quot;">​</a></h5><p>死锁的经典条件通常包括以下四个条件（叫做 <strong>死锁的必要条件</strong>）：</p><ol><li><strong>互斥条件</strong>：每个资源（这里是筷子）只能被一个哲学家使用。</li><li><strong>占用并等待条件</strong>：哲学家已经占用了一个筷子，并等待获取另一个筷子。</li><li><strong>不剥夺条件</strong>：已经获取的筷子不能被强制剥夺，只有哲学家自己放下筷子。</li><li><strong>循环等待条件</strong>：存在一个哲学家等待另外一个哲学家的筷子，形成一个环路。</li></ol></blockquote><h4 id="解决方案1" tabindex="-1">解决方案1 <a class="header-anchor" href="#解决方案1" aria-label="Permalink to &quot;解决方案1&quot;">​</a></h4><blockquote><p>让 <strong>偶数编号的哲学家</strong> 先拿 <strong>左筷子</strong>，然后再拿 <strong>右筷子</strong>；而 <strong>奇数编号的哲学家</strong> 先拿 <strong>右筷子</strong>，再拿 <strong>左筷子</strong>。这样可以避免所有哲学家同时拿起一根筷子并阻塞，从而避免死锁。</p></blockquote><p>实现：</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 哲学家数量</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> philosopher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //i:哲学家编号 from 0 to 4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        think</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 偶数编号哲学家先拿左筷子，再拿右筷子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 奇数编号哲学家先拿右筷子，再拿左筷子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        eat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="解决方案2-资源分配策略" tabindex="-1">解决方案2-资源分配策略 <a class="header-anchor" href="#解决方案2-资源分配策略" aria-label="Permalink to &quot;解决方案2-资源分配策略&quot;">​</a></h4><blockquote><p>使用了 <strong>信号量（semaphore）</strong> 和 <strong>进程状态管理</strong> 来避免死锁和饥饿问题。它属于 <strong>使用条件变量和互斥锁的同步解决方案</strong>，是一种基于 <strong>状态机</strong> 的解决方案</p></blockquote><h5 id="_1-状态管理" tabindex="-1">1. <strong>状态管理</strong> <a class="header-anchor" href="#_1-状态管理" aria-label="Permalink to &quot;1. **状态管理**&quot;">​</a></h5><p>每个哲学家都有 3 种状态：</p><ul><li><strong>THINKING</strong>：哲学家正在思考，不需要任何筷子。</li><li><strong>HUNGRY</strong>：哲学家正在等待筷子（已经准备好吃饭）。</li><li><strong>EATING</strong>：哲学家正在吃饭，正在使用两根筷子。</li></ul><h5 id="_2-信号量" tabindex="-1">2. <strong>信号量</strong> <a class="header-anchor" href="#_2-信号量" aria-label="Permalink to &quot;2. **信号量**&quot;">​</a></h5><ul><li><strong><code>mutex</code></strong>：用于保护对共享资源（<code>state[]</code> 数组）的访问，确保在修改状态时互斥。</li><li><strong><code>s[i]</code></strong>：是每个哲学家的信号量。每个哲学家的 <code>s[i]</code> 信号量控制哲学家的进程何时能继续执行（即什么时候能开始吃饭）。它的作用是当哲学家获得两根筷子时，它会被释放（<code>up(&amp;s[i])</code>），哲学家就可以继续执行。</li></ul><h5 id="_3-take-fork-i-尝试拿起左右两边的筷子" tabindex="-1">3. <strong><code>take_fork(i)</code></strong>：尝试拿起左右两边的筷子 <a class="header-anchor" href="#_3-take-fork-i-尝试拿起左右两边的筷子" aria-label="Permalink to &quot;3. **`take_fork(i)`**：尝试拿起左右两边的筷子&quot;">​</a></h5><ul><li><strong>进入临界区</strong>：通过 <code>down(&amp;mutex)</code>，保护 <code>state[i]</code> 的修改。</li><li><strong>更改状态为 HUNGRY</strong>：哲学家将自己的状态设置为 <strong>HUNGRY</strong>，表示他想吃饭了。</li><li><strong>尝试吃饭</strong>：调用 <code>test(i)</code> 来检查该哲学家是否能够拿起两根筷子。</li><li><strong>退出临界区</strong>：通过 <code>up(&amp;mutex)</code>，释放互斥锁。</li><li><strong>阻塞自己</strong>：如果哲学家不能同时拿到两根筷子（即左右两边的哲学家正在吃饭），则阻塞自己，等待 <code>s[i]</code> 信号量。</li></ul><h5 id="_4-put-fork-i-放下两根筷子" tabindex="-1">4. <strong><code>put_fork(i)</code></strong>：放下两根筷子 <a class="header-anchor" href="#_4-put-fork-i-放下两根筷子" aria-label="Permalink to &quot;4. **`put_fork(i)`**：放下两根筷子&quot;">​</a></h5><ul><li><strong>进入临界区</strong>：同样使用 <code>down(&amp;mutex)</code> 来保护对 <code>state[]</code> 数组的修改。</li><li><strong>更改状态为 THINKING</strong>：哲学家吃完饭后，将自己的状态设置为 <strong>THINKING</strong>。</li><li><strong>检查左、右邻居</strong>：调用 <code>test(LEFT)</code> 和 <code>test(RIGHT)</code> 来检查左邻居和右邻居是否能够开始吃饭。如果他们处于 <strong>HUNGRY</strong> 状态并且没有在吃饭，那么就可以让他们开始吃饭。</li><li><strong>退出临界区</strong>：通过 <code>up(&amp;mutex)</code> 来释放互斥锁。</li></ul><h5 id="_5-test-i-判断哲学家是否可以吃饭" tabindex="-1">5. <strong><code>test(i)</code></strong>：判断哲学家是否可以吃饭 <a class="header-anchor" href="#_5-test-i-判断哲学家是否可以吃饭" aria-label="Permalink to &quot;5. **`test(i)`**：判断哲学家是否可以吃饭&quot;">​</a></h5><ul><li><strong>检查条件</strong>：只有当哲学家处于 <strong>HUNGRY</strong> 状态，且左边和右边的哲学家都没有在吃饭时（<code>state[LEFT] != EATING &amp;&amp; state[RIGHT] != EATING</code>），该哲学家才能开始吃饭。</li><li><strong>更新状态</strong>：如果条件满足，则将哲学家的状态改为 <strong>EATING</strong>，并通过 <code>up(&amp;s[i])</code> 释放哲学家的信号量，允许该哲学家继续执行。</li></ul><h5 id="优点" tabindex="-1">优点 <a class="header-anchor" href="#优点" aria-label="Permalink to &quot;优点&quot;">​</a></h5><ol><li><strong>避免死锁</strong>： <ul><li>通过 <strong>状态机</strong> 控制哲学家的行为，避免了所有哲学家同时拿起左筷子、然后等待右筷子导致的循环等待。</li><li>每个哲学家在状态为 <strong>HUNGRY</strong> 时会检测左邻居和右邻居是否可以吃饭。如果任一邻居正在吃饭，哲学家就会阻塞（通过 <code>down(&amp;s[i])</code>）。</li><li>只有当哲学家左右两边都没有人吃饭时，才允许哲学家开始吃饭。</li></ul></li><li><strong>避免饥饿</strong>： <ul><li>每个哲学家会根据 <strong><code>test()</code></strong> 函数的规则不断尝试吃饭。如果一个哲学家周围的邻居没有筷子，哲学家就会获得筷子并开始吃饭。</li><li>这个策略确保了每个哲学家都会有机会吃饭，只要其他哲学家不长期占用两根筷子。</li></ul></li><li><strong>公平性</strong>： <ul><li>该解决方案具有某种程度的公平性，因为哲学家在 <strong>HUNGRY</strong> 状态时会不断尝试，而不会无限等待某一根筷子。</li><li>因为信号量的机制，哲学家会被合理地唤醒（<code>up(&amp;s[i])</code>），而不是无限阻塞在 <strong>HUNGRY</strong> 状态。</li></ul></li></ol><h5 id="实现" tabindex="-1">实现 <a class="header-anchor" href="#实现" aria-label="Permalink to &quot;实现&quot;">​</a></h5><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  // 哲学家数量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 左边哲学家(叉子)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RIGHT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 右边哲学家(叉子)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> THINKING</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HUNGRY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EATING</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> semaphore;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[N];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore mutex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[N];</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //每个哲学家的信号量,当哲学家获得两根筷子时，它会被释放（up(&amp;s[i])），哲学家就可以继续执行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> philosopher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // i:哲学家编号 from 0 to 4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        think</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 获取到左右两边的叉子或者阻塞</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        eat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 放回叉子到桌子上</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> take_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 进入临界区</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HUNGRY;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 尝试拿起两个叉子</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 退出临界区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> put_fork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> THINKING;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LEFT);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RIGHT);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HUNGRY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[LEFT] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EATING </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[RIGHT] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EATING)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EATING;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="读者-写者问题" tabindex="-1">读者-写者问题 <a class="header-anchor" href="#读者-写者问题" aria-label="Permalink to &quot;读者-写者问题&quot;">​</a></h3><blockquote><p>在这个问题中，多个线程或进程需要访问一个共享的资源（通常是数据或文件），其中有两类操作：读取操作和写入操作。</p><p>问题的目标是设计一个机制，确保：</p><ul><li>读者可以并行读取共享资源；</li><li>写者在访问共享资源时，其他读者和写者都不能同时访问该资源；</li><li>保证系统的公平性和效率，避免死锁或饥饿现象。</li></ul></blockquote><h4 id="解决方案-读者优先策略" tabindex="-1">解决方案-读者优先策略 <a class="header-anchor" href="#解决方案-读者优先策略" aria-label="Permalink to &quot;解决方案-读者优先策略&quot;">​</a></h4><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> semaphore;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore mutex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //用于控制对数据库的访问。只有一个写者能够访问数据库，且当有写者在写数据时，读者和其他写者都无法访问数据库。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //读者计数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        read_data_base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //读取数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        use_data_read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //处理读取到的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> writer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        think_up_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //写者的数据准备过程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        write_data_base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="为什么是读者优先" tabindex="-1">为什么是读者优先？ <a class="header-anchor" href="#为什么是读者优先" aria-label="Permalink to &quot;为什么是读者优先？&quot;">​</a></h5><ul><li><strong>读者的并发性</strong>：多个读者可以并发访问数据库，只要没有写者在写入。每个读者进入临界区时会增加 <code>rc</code>，并且只有当第一个读者进入时，它才会阻止写者。只要有读者存在，写者必须等待。</li><li><strong>写者的独占性</strong>：当有写者准备写数据时，它必须等待所有读者结束阅读（即 <code>rc == 0</code>）后才能获得访问权限。这意味着写者的访问优先级是低于读者的。</li></ul><h3 id="理发师睡觉问题" tabindex="-1">理发师睡觉问题 <a class="header-anchor" href="#理发师睡觉问题" aria-label="Permalink to &quot;理发师睡觉问题&quot;">​</a></h3><blockquote><p>假设理发店有一个理发师和若干个顾客，每个顾客都会先排队等待，直到理发师有空。如果没有顾客，理发师会睡觉；当有顾客到来时，理发师会醒来并为顾客理发。如果所有的座位都被占满（即已有顾客在排队），新的顾客就会离开，而不会等候。</p><p>具体来说，问题包括以下几个方面：</p><ol><li><strong>理发师睡觉</strong>：当没有顾客时，理发师就会进入“睡觉”状态。</li><li><strong>顾客到来</strong>：顾客会在理发店等待，直到理发师可以为他们理发。如果理发店没有空座位（所有座位都被占用），顾客将离开。</li><li><strong>理发师为顾客理发</strong>：当有顾客时，理发师会唤醒并为顾客提供理发服务。每个理发服务有一个固定的时间，理发师只能同时为一个顾客服务。</li></ol></blockquote><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CHAIRS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> semaphore;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore customers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore barbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">semaphore mutex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //正在等待的顾客数量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> barber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">customers);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">barbers);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        cut_hair</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHAIRS)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waiting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">customers);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">barbers);</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        get_haircut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mutex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="进程调度" tabindex="-1">进程调度 <a class="header-anchor" href="#进程调度" aria-label="Permalink to &quot;进程调度&quot;">​</a></h2><ul><li><p>作业调度（高级调度）</p><p>当作业输入提交后，处于后备状态，该层调度以一定 的策略选择作业由输入设备进入内存，作业由后备态变为 运行态（在内存中的状态）</p></li><li><p>交换调度（中级调度）： 当进程在内存阻塞等待时，考虑提升内存利用率，按照一定策略选择进程将其交换至外存等待。</p></li><li><p>进程调度（低级调度）： 按照一定策略选择获得CPU的进程，进程由绪态到运 行态</p></li></ul><h3 id="进程及作业调度的性能评价指标" tabindex="-1">进程及作业调度的性能评价指标 <a class="header-anchor" href="#进程及作业调度的性能评价指标" aria-label="Permalink to &quot;进程及作业调度的性能评价指标&quot;">​</a></h3><h4 id="平均周转时间" tabindex="-1">平均周转时间 <a class="header-anchor" href="#平均周转时间" aria-label="Permalink to &quot;平均周转时间&quot;">​</a></h4><p>Ｔi＝tie-tis （ tie：作业完成时刻，tis：作业提交时刻）</p><p>Ｔi＝tie-tir （ tie：进程完成本次CPU周期时刻 tir：进程进入就绪队列时刻）</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212103104320.png" alt="image-20241212103104320"></p><h4 id="平均带权周转时间" tabindex="-1">平均带权周转时间 <a class="header-anchor" href="#平均带权周转时间" aria-label="Permalink to &quot;平均带权周转时间&quot;">​</a></h4><p>设 ti表示进程或作业的实际运行时间，则有</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212103200430.png" alt="image-20241212103200430"></p><h4 id="平均等待时间-主要针对进程而言" tabindex="-1">平均等待时间：（主要针对进程而言） <a class="header-anchor" href="#平均等待时间-主要针对进程而言" aria-label="Permalink to &quot;平均等待时间：（主要针对进程而言）&quot;">​</a></h4><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212103526828.png" alt="image-20241212103526828"></p><h3 id="调度算法" tabindex="-1">调度算法 <a class="header-anchor" href="#调度算法" aria-label="Permalink to &quot;调度算法&quot;">​</a></h3><h4 id="先来先服务算法-fcfs" tabindex="-1">先来先服务算法（FCFS) <a class="header-anchor" href="#先来先服务算法-fcfs" aria-label="Permalink to &quot;先来先服务算法（FCFS)&quot;">​</a></h4><blockquote><p>特点：对执行时间短的进程及作业等待时间将长</p></blockquote><h5 id="eg1" tabindex="-1">eg1 <a class="header-anchor" href="#eg1" aria-label="Permalink to &quot;eg1&quot;">​</a></h5><p>假设有四道作业，它们的提交时刻及执行时间如下表：</p><table tabindex="0"><thead><tr><th>作业号</th><th>提交时刻</th><th>执行时间</th></tr></thead><tbody><tr><td>1</td><td>8.00</td><td>2.00</td></tr><tr><td>2</td><td>8.50</td><td>0.50</td></tr><tr><td>3</td><td>9.00</td><td>0.10</td></tr><tr><td>4</td><td>9.50</td><td>0.20</td></tr></tbody></table><p>分别求调度序列，平均周转时间及平均带权周转时间</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212105140862.png" alt="image-20241212105140862"></p><h5 id="eg2" tabindex="-1">eg2 <a class="header-anchor" href="#eg2" aria-label="Permalink to &quot;eg2&quot;">​</a></h5><p>有三个进程p1,p2,p3的本次cpu周期时值分别为21ms,6ms,3ms, 进程进入就绪队列的次序为p1,p2,p3</p><p>求调度序列，平均周转时间、平均带权周转时间、平均等待时间</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212110221968.png" alt="image-20241212110221968"></p><h4 id="最短作业优先法-sjf" tabindex="-1">最短作业优先法（ＳＪＦ） <a class="header-anchor" href="#最短作业优先法-sjf" aria-label="Permalink to &quot;最短作业优先法（ＳＪＦ）&quot;">​</a></h4><blockquote><p>特点：</p><ul><li>吞吐量大</li><li>对不断有作业进入的系统，长作业将永得不到执行</li></ul></blockquote><p>选择估计需要执行时间最短的作业或进程投入运行（对进程而言，指估算的本次cpu周期的长短，如果是可剥夺式调度，则 按剩余最短原则）</p><h5 id="eg1-1" tabindex="-1">eg1 <a class="header-anchor" href="#eg1-1" aria-label="Permalink to &quot;eg1&quot;">​</a></h5><p>假设有四道作业，它们的提交时刻及执行时间如下表：</p><table tabindex="0"><thead><tr><th>作业号</th><th>提交时刻</th><th>执行时间</th></tr></thead><tbody><tr><td>1</td><td>8.00</td><td>2.00</td></tr><tr><td>2</td><td>8.50</td><td>0.50</td></tr><tr><td>3</td><td>9.00</td><td>0.10</td></tr><tr><td>4</td><td>9.50</td><td>0.20</td></tr></tbody></table><p>分别求调度序列，平均周转时间及平均带权周转时间</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212112559886.png" alt="image-20241212112559886"></p><h4 id="响应比高优先算法-hrn" tabindex="-1">响应比高优先算法（ＨＲＮ） <a class="header-anchor" href="#响应比高优先算法-hrn" aria-label="Permalink to &quot;响应比高优先算法（ＨＲＮ）&quot;">​</a></h4><blockquote><p>特点:</p><ul><li>介于ＦＣＦＳ与ＳＪＦ之间</li><li>吞吐量减少</li><li>增加了系统开销</li></ul></blockquote><p>响应比的计算方式如下：</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241212114142817.png" alt="image-20241212114142817"></p><p>其中：</p><ul><li><p>T 是进程的预计执行时间。</p></li><li><p>W 是进程等待的时间，即从进程到达就绪队列到当前时间的时间。</p></li><li><blockquote><p>响应比的含义：</p><ul><li>当进程的等待时间 W很大时，响应比也会较高。</li><li>如果进程的预计执行时间 T较小，那么响应比也会较高。</li></ul><p>因此，响应比高的进程将优先执行，确保那些长时间等待的进程能够得到更好的调度，避免它们一直被短进程抢占资源。</p></blockquote></li></ul><h5 id="eg1-2" tabindex="-1">eg1 <a class="header-anchor" href="#eg1-2" aria-label="Permalink to &quot;eg1&quot;">​</a></h5><p>假设有四道作业，它们的提交时刻及执行时间如下表：</p><table tabindex="0"><thead><tr><th>作业号</th><th>提交时刻</th><th>执行时间</th></tr></thead><tbody><tr><td>1</td><td>8.00</td><td>2.00</td></tr><tr><td>2</td><td>8.50</td><td>0.50</td></tr><tr><td>3</td><td>9.00</td><td>0.10</td></tr><tr><td>4</td><td>9.50</td><td>0.20</td></tr></tbody></table><p>分别求调度序列，平均周转时间及平均带权周转时间</p><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241213140050270.png" alt="image-20241213140050270"></p><h4 id="轮转法-rr" tabindex="-1">轮转法（ＲＲ） <a class="header-anchor" href="#轮转法-rr" aria-label="Permalink to &quot;轮转法（ＲＲ）&quot;">​</a></h4><blockquote><p>将ＣＰＵ时间划分成一个个时间片，每个进程轮流使用一个时间片</p><p>特点：时间片的设置： q=T/N</p><ul><li><p>T: 系统的最大响应时间 ＣＰＵ</p></li><li><p>N:就绪队列中所允许的最大进程数</p></li><li><p>q 的取值不能过大或过小</p></li></ul></blockquote><p>有三个进程p1,p2,p3的本次cpu周期时值分别为21ms,6ms,3ms, 进程进入就绪队列的次序为p1,p2,p3</p><p>求调度序列，平均周转时间、平均带权周转时间、平均等待时间</p><h4 id="优先级调度算法" tabindex="-1">优先级调度算法 <a class="header-anchor" href="#优先级调度算法" aria-label="Permalink to &quot;优先级调度算法&quot;">​</a></h4><blockquote><p>选择优先级高的进程／作业执行</p></blockquote><h5 id="eg1-3" tabindex="-1">eg1 <a class="header-anchor" href="#eg1-3" aria-label="Permalink to &quot;eg1&quot;">​</a></h5><p>有５个进程Ｐ１，Ｐ２，Ｐ３，Ｐ４，Ｐ５，它们的ＣＰＵ周期时值及优先级如下表：</p><table tabindex="0"><thead><tr><th></th><th>ＣＰＵ周期性</th><th>优先数</th><th>进入时刻</th></tr></thead><tbody><tr><td>P1</td><td>32</td><td>5</td><td>0</td></tr><tr><td>P2</td><td>4</td><td>3</td><td>0</td></tr><tr><td>P3</td><td>8</td><td>2</td><td>0</td></tr><tr><td>P4</td><td>2</td><td>6</td><td>0</td></tr><tr><td>P5</td><td>16</td><td>4</td><td>16</td></tr></tbody></table><ol><li>在非剥夺方式下，求它们的调度序列，平均等待时间，平均周转时间，平均带权周转时间(由2知优先级小的先执行)</li></ol><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241216190550053.png" alt="image-20241216190550053"></p><ol start="2"><li>在可剥夺方式下，设优先级按如下规律变化：连续执行10ms以上后优先数 加１，就绪队列中的进程每40ms优先数减１；则求它们的调度序列，平均等待 时间，平均周转时间，平均带权周转时间</li></ol><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241215112451183.png" alt="image-20241215112451183"></p><h4 id="多队列轮转法" tabindex="-1">多队列轮转法 <a class="header-anchor" href="#多队列轮转法" aria-label="Permalink to &quot;多队列轮转法&quot;">​</a></h4><blockquote><p>进程按不同的优先级进入不同的队列，每个队列又采用不同的 算法</p></blockquote><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20241213143246702.png" alt="image-20241213143246702"></p><h2 id="思考题" tabindex="-1">思考题 <a class="header-anchor" href="#思考题" aria-label="Permalink to &quot;思考题&quot;">​</a></h2><ol><li><p><strong>进程的定义</strong></p><ul><li>可以与其他程序并发执行的程序的一次执行，是系统资源分配的基本单位</li></ul></li><li><p><strong>进程的特征</strong></p><ul><li>动态Dynamic（创建、调度执行、撤消）</li><li>并发Concurrency （多道并发）</li><li>独立Independent（逻辑独立性）</li><li>异步Asynchronous（不假设进行何时开始、结束）</li><li>结构structure（逻辑结构）</li></ul></li><li><p>进程与程序的区别和联系</p><ul><li><a href="#进程VS程序">区别与联系</a></li></ul></li><li><p>进程实体的组成</p><ul><li>程序段</li><li>数据段</li><li>进程控制块（PCB）</li></ul></li><li><p>PCB 的作用和特点</p><ul><li>反映进程的动态特征</li><li>特点：</li></ul></li><li><p><strong>进程的状态及其变迁（并能说出原因）</strong></p><ul><li><a href="#进程状态及其转换">进程状态及其转换</a></li></ul></li><li><p>处理机的执行状态（核心态、用户态）</p></li><li><p>内核的定义及功能；<strong>原语的定义及功能</strong></p><ul><li><a href="#原语">原语定义</a></li><li>原语功能：创建，撤消进程及完成进程之间状态转换</li></ul></li><li><p>进程控制方式</p></li><li><p><strong>进程同步与互斥的定义</strong></p><ul><li>进程同步：异步环境下，一组并发进程因直接制约而相互发送消息， 相互合作，相互等待，使各进程按一定速度执行的过程</li><li>互斥：不允许两个以上的共享该资源的并发进程同时进入临界区，称为互斥</li></ul></li><li><p><strong>临界资源与临界区的定义</strong></p><ul><li>临界资源（竞争条件）：一次只允许一个进程使用的资源</li><li>临界区：在每个进程中，访问临界资源的那部分代码（那段程序）</li></ul></li><li><p>好的互斥方案应遵循的条件</p><ul><li><a href="#并发进程互斥执行准则">条件</a></li></ul></li><li><p><strong>信号量机机制P（down）V(up)操作的原理</strong></p></li><li><p><strong>PV 操作解决互斥</strong></p></li><li><p><strong>PV 操作解决于生产者与消费者问题</strong></p></li><li><p>进程通信的类型及其过程和特点</p><ul><li>低级通信：同步&amp;互斥</li><li>高级通信：管道通信、消息队列、共享内存、网络通信</li></ul></li><li><p>进程调度的概念、方式、原因、过程</p></li><li><p><strong>进程调度的算法</strong></p><ul><li><a href="#调度算法">调度算法</a></li></ul></li><li><p>高级高度（作业调度）的算法</p></li><li><p><strong>线程的定义和作用；线程与进程的联系与区别、线程的类型</strong></p><ul><li><a href="#线程">定义</a></li><li><a href="#引入线程的原因">作用</a></li><li>区别： <ol><li>进程是资源管理的基本单位，而线程是调度的基本单位。<a href="#线程与进程">参考</a></li><li>进程间切换开销大，线程间切换开销小</li><li>进程有独立的内存单元，线程共享进程内存。</li></ol></li><li>联系： <ol><li>线程是进程的一部分，一个进程至少有一个线程（主线程）</li><li>进程是线程存在的前提。</li><li>线程是进程的基本执行单元，一个进程中的所有任务都在线程中执行</li></ol></li></ul></li><li><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20250107122713862.png" alt="image-20250107122713862"></p><ul><li>分下面几种情况： <ol><li>P0、P1、P2都在1个CPU1个线程运行 （35ms）</li><li>P0、P1在不同线程运行、P1和P2同一线程（30ms）</li><li>P0、P1在不同线程运行、P0和P2同一线程（25ms）</li><li>P0、P2在不同线程运行、P0和P1同一线程 (20ms)</li><li>P0、P2在不同线程运行、P2和P1同一线程 (30ms)</li><li>P1、P2在不同线程运行、P1和P0同一线程（20ms）</li><li>P1、P2在不同线程运行、P2和P0同一线程（25ms）</li><li>P1、P2、P3都再不同线程运行（20ms）</li></ol></li></ul></li><li><p><img src="https://typora5672.oss-cn-chengdu.aliyuncs.com/temp/image-20250107132042846.png" alt="image-20250107132042846"></p><ul><li><p>设一个进程等待概率为x</p><p>最大进程数为：(4096-512)/256=14</p><p>进程都等待概率为：x^14^=1%</p></li></ul></li></ol><h2 id="思考题2" tabindex="-1">思考题2 <a class="header-anchor" href="#思考题2" aria-label="Permalink to &quot;思考题2&quot;">​</a></h2><ol><li>计算机系统内资源分配是以进程为单位还是线程为单位，为什么？ <ul><li>资源分配通常是以进程为单位进行的。这是因为进程拥有独立的地址空间和资源集合，这样可以更好地隔离不同进程，提高系统的稳定性和安全性。线程作为进程的一部分，共享进程的资源，这样可以减少资源分配和管理的开销。</li></ul></li><li>请举例一个你所知道的多线程应用场景的例子。 <ul><li>一个常见的多线程应用场景是Web服务器。Web服务器需要同时处理多个客户端的请求，每个请求可以由一个线程来处理。这样，服务器可以并行处理多个请求，提高响应速度和吞吐量。</li></ul></li><li>临界区访问机制的四个原则是什么。 临界区访问机制通常遵循以下四个原则： <ul><li>忙则等待：当临界区正在被某个进程访问时（即忙状态），其他试图进入临界区的进程必须等待，直到临界区变为空闲状态。</li><li>空闲让进：当临界区处于空闲状态时，允许一个请求进入临界区的进程立即进入临界区进行访问。</li><li>有限等待：对要求访问临界区的进程，应保证其在有限时间内能够进入临界区，避免进程无限期地等待，从而陷入“死等”状态。</li><li>让权等待：当进程不能进入临界区时，应当释放CPU，使其他进程有机会获得CPU，避免进程陷入“忙等”状态，浪费系统资源。</li></ul></li><li>进程具有异步性。异步，即每个程序不考虑其它程序的运行进度，按自己的逻辑往前运行。那么，异步性这个特点，好不好呢？是进程的优点还是缺点呢？ <ul><li>异步性是进程的一个重要特性，它允许多个进程独立运行，互不干扰。这通常被认为是一个优点，因为它提高了系统的并发性和效率。然而，如果不正确地管理异步性，可能会导致竞态条件和死锁等问题，这时它可能成为缺点。因此，异步性本身是中性的，关键在于如何管理和控制。</li></ul></li><li>实际操作系统中，为何没有“阻塞到运行”或“就绪到阻塞”这样的状态迁移？ <ul><li>在实际的操作系统中，状态迁移通常遵循一定的逻辑和顺序。一个进程从阻塞状态直接变为运行状态是不合理的，因为它需要先进入就绪状态，等待CPU调度。同样，一个进程从就绪状态直接变为阻塞状态也是不合理的，因为它需要先被调度运行。状态迁移需要遵循操作系统的调度策略和资源管理机制，以确保系统的稳定性和效率。</li></ul></li><li>进程可以通过什么来实现？在Linux操作系统下，通过哪个结构实现 <ul><li>进程可以通过进程控制块PCB、程序、数据集实现。在Linux操作系统下，进程是通过“task_struct”结构和“thread_info”结构来实现的。</li></ul></li><li>进程调度的本质是什么？ <ul><li>进程调度的本质是进程上下文切换</li></ul></li><li>“撤销进程”的定义中提到，撤销一个进程之前，先【递归】检查其是否有子进程，如有，应先“撤销”子进程。请问，Linux是否会按这个要求去撤销某个进程?如果是的话，会有什么后果?如果不是的话，系统如何处理该进程的子孙进程（这些进程将失去父进程或祖先进程）？ <ul><li>Linux会按照先递归检查子进程再撤销父进程的要求去处理。如果一个进程有子进程，那么在该进程被撤销之前，系统会先递归地撤销其所有子进程。这样做是为了避免产生僵尸进程（即已终止但尚未被父进程回收的进程）。撤销进程后，系统会释放该进程所占用的资源，并将其从进程列表中移除。如果不按照这个要求去撤销进程，那么子进程可能会变成孤儿进程（即父进程已终止但子进程仍在运行的进程）。在Linux中，孤儿进程会被init进程（PID为1的进程）收养，并由init进程负责回收其资源。</li></ul></li><li>锁机制若是软件实现，会存在什么问题？ <ul><li>如果锁机制是软件实现的，那么它可能会存在效率较低、容易受到系统其他部分影响的问题。因为软件锁需要通过操作系统提供的系统调用来实现，这会涉及到上下文切换、系统调用开销等额外成本。此外，软件锁还可能存在死锁、饥饿等并发编程中常见的问题。</li></ul></li><li>举出生活中类似“司机和售票员”的同步例子 <ul><li>生活中类似“司机和售票员”的同步例子很多，比如厨师和服务员在餐厅中的工作配合。厨师负责烹饪食物，服务员负责将食物送到顾客手中。他们之间需要通过对讲喊话等方式来同步工作节奏，以确保食物能够及时、准确地送到顾客手中。</li></ul></li><li>V操作定义中的q队列里面的进程都是阻塞进程。请问这些进程是从何而来的？或者说这些进程是怎么变成阻塞状态进入q队列的？ <ul><li>在V操作中，q队列里面的进程都是因等待某种资源或事件而处于阻塞状态的进程。这些进程在请求资源或事件时，如果资源或事件不可用，它们就会被放入q队列中等待。当资源或事件变得可用时，系统会通过V操作来唤醒这些进程并继续执行。进程变成阻塞状态进入q队列的原因通常是因为它们需要等待I/O操作完成、等待信号量释放、等待互斥锁等。</li></ul></li><li>子进程的exit( )函数返回参数由父进程处理或接收。那么，在控制台上直接启动的一个应用程序，其末尾的exit( )函数返回参数由谁处理或接收？ <ul><li>在控制台上直接启动的一个应用程序，其末尾的exit()函数返回参数通常由操作系统处理或接收。操作系统会根据这个返回参数来结束进程并释放相关资源。在某些情况下，这个返回参数也可以被其他进程（如父进程或监控进程）通过特定方式（如管道、信号等）来获取。</li></ul></li><li>进程调度的7个目标中，批处理系统、分时系统、实时系统分别更注重哪些目标？ <ul><li>批处理系统更注重大的吞吐量、短的周转时间、高的CPU利用率；分时系统更注重均衡性和短的响应时间；实时系统更注重满足实时性要求和具有可预测性。</li></ul></li><li>各种调度算法各有优势，请你给出一个更优的调度算法的基本思想描述 <ul><li>一个更优的调度算法应该能够综合考虑各种因素（如进程优先级、系统负载、资源使用情况等）来做出更合理的调度决策。其基本思想可以包括：根据进程优先级来分配处理器资源，以确保高优先级进程能够得到及时响应；通过动态调整进程优先级来平衡系统负载和资源使用情况；采用合适的上下文切换机制来减少调度开销等。</li></ul></li><li>Linux系统中普通进程采用何种调度策略？实时进程又采用何种调度策略？ * 在Linux系统中，普通进程通常采用CFS（Completely Fair Scheduler）调度策略。CFS是一种基于虚拟运行时间（vruntime）的调度算法，它力求让所有进程在长期内获得大致相等的CPU时间份额。而对于实时进程来说，Linux提供了抢占式实时调度策略，包括SCHED_FIFO（先入先出）和SCHED_RR（时间片轮转）等。这些策略允许实时进程根据优先级和调度策略规则被优先调度执行。</li></ol></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一篇</span><span class="title" data-v-e257564d>输入输出</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/%E5%85%AB%E8%82%A1/%E6%B1%87%E7%BC%96/%E5%AF%84%E5%AD%98%E5%99%A8.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一篇</span><span class="title" data-v-e257564d>寄存器</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024.8.15-present 九问.All Rights Reserved.</p></div></footer><!--[--><!--]--></div><!----><!----><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"psnOliN8\",\"linux_linux基础入门.md\":\"CIShWcNR\",\"python高级编程_内存管理.md\":\"C7Q1jP2n\",\"python高级编程_单例模式.md\":\"BfdwzWgS\",\"python高级编程_多进程多线程协程.md\":\"R7lOQDjQ\",\"python高级编程_深浅拷贝.md\":\"Bz7GsDR4\",\"python高级编程_练习题.md\":\"B4vJJclf\",\"python高级编程_自省.md\":\"BC5jXeKA\",\"python高级编程_迭代器和生成器.md\":\"TIjZp5YH\",\"python高级编程_闭包和装饰器.md\":\"5HC9tFBR\",\"python高级编程_高阶函数.md\":\"BW7WrAcv\",\"python高级编程_魔法方法.md\":\"CA3r7E-6\",\"python高级编程_鸭子类型.md\":\"_8i5CbhL\",\"vue3_axios.md\":\"eAES1KQw\",\"vue3_面试.md\":\"DQYK8ddP\",\"八股_操作系统_存储管理.md\":\"D8mC5fRJ\",\"八股_操作系统_操作系统安全及虚拟化技术概述.md\":\"CsL79zx9\",\"八股_操作系统_操作系统概述及基本概念.md\":\"DPN-XP6f\",\"八股_操作系统_文件系统.md\":\"EClqE0c_\",\"八股_操作系统_死锁.md\":\"RDMSRkPS\",\"八股_操作系统_输入输出.md\":\"p9Ai2OiM\",\"八股_操作系统_进程与线程.md\":\"C-Cv6gvo\",\"八股_汇编_串指令.md\":\"IA3xV7UB\",\"八股_汇编_前置知识.md\":\"Dw8cpTi3\",\"八股_汇编_宏汇编.md\":\"wr38K4XZ\",\"八股_汇编_寄存器.md\":\"B-G2Mdaj\",\"八股_汇编_寻址方式.md\":\"CpbB3xeR\",\"八股_汇编_数据传送指令.md\":\"BWLObHp_\",\"八股_汇编_程序设计综合.md\":\"BpVSnej0\",\"八股_汇编_逻辑运算与移位指令.md\":\"CcANrex_\",\"八股_网安_网络安全.md\":\"CgeHsZmC\",\"前端三件套_css_css基础入门.md\":\"Bwx12vIp\",\"前端三件套_css_flexbox布局.md\":\"DNmdRG7Z\",\"前端三件套_css_grid布局.md\":\"CIxUl3ST\",\"前端三件套_css_动画.md\":\"Ct-fyc6m\",\"前端三件套_css_媒体查询.md\":\"O34d23hZ\",\"前端三件套_css_属性.md\":\"rC2XtXCj\",\"前端三件套_html_html基础.md\":\"Cg2bVdHz\",\"前端三件套_js_dom操作.md\":\"BSG9Z0oT\",\"前端三件套_js_js入门.md\":\"cfLyGERi\",\"前端三件套_js_高阶函数.md\":\"Crh5GCUM\",\"前端三件套_实战案例_聊天页面.md\":\"CAaeMamf\",\"前端三件套_面试_基本题.md\":\"igvZULl2\",\"工具_api-examples.md\":\"BfRXmio-\",\"工具_git_gitignore.md\":\"BQfi0I2N\",\"工具_git_git的基本使用.md\":\"tA1DFHmr\",\"工具_git_同时推送gitee和github.md\":\"BrDgut6b\",\"工具_markdown-examples.md\":\"D5pm5mUw\",\"工具_漫画-我从11楼跳下.md\":\"DJX7fe-s\",\"性能测试_基础概念.md\":\"CCYaBTFz\",\"测开_faker数据随机生成.md\":\"BElQnUBC\",\"测开_pytest基础.md\":\"Dbnd8X-e\",\"测开_unittest.md\":\"DdykpXkt\",\"测开_yaml文件.md\":\"7q8o2ySl\",\"爬虫_bs4解析.md\":\"CnJJ8CW0\",\"爬虫_scrapy.md\":\"8lR1F9PM\",\"爬虫_selenium.md\":\"D3v4vjU7\",\"爬虫_xpath解析.md\":\"BY1kv0bR\",\"爬虫_导论.md\":\"BtTW5Jcv\",\"爬虫_抓包.md\":\"Dgrz86u0\",\"爬虫_登录流程.md\":\"DE3-lPdv\",\"项目部署_vitepress_githubpages部署.md\":\"BSHmvQuA\",\"项目部署_vitepress_netlify部署.md\":\"DK-r2RIR\",\"项目部署_vitepress_nginx部署.md\":\"BLGPd1vv\",\"项目部署_web.md\":\"DhkRfBe7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"九问Blog\",\"description\":\"欢迎访问九问Blog！分享一些Python全栈开发以及爬虫技术，希望对你有所帮助\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/jiuwen567\"},{\"icon\":{\"svg\":\"<svg t=\\\"1724307958358\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"4234\\\" width=\\\"200\\\" height=\\\"200\\\"><path d=\\\"M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m284.8 313.6c0 12.8-12.8 25.6-25.6 25.6H416c-41.6 0-76.8 35.2-76.8 76.8v243.2c0 12.8 12.8 25.6 25.6 25.6h240c41.6 0 76.8-35.2 76.8-76.8v-12.8c0-12.8-12.8-25.6-25.6-25.6H480c-12.8 0-25.6-12.8-25.6-25.6v-64c0-12.8 12.8-25.6 25.6-25.6h291.2c12.8 0 25.6 12.8 25.6 25.6v144c0 92.8-76.8 169.6-169.6 169.6H252.8c-12.8 0-25.6-12.8-25.6-25.6V412.8C227.2 310.4 310.4 224 416 224h355.2c12.8 0 25.6 12.8 25.6 25.6v64z\\\" fill=\\\"#B32225\\\" p-id=\\\"4235\\\"></path></svg>\"},\"link\":\"https://gitee.com/jiuwen567\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2024.8.15-present 九问.All Rights Reserved.\"},\"search\":{\"provider\":\"local\"},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\",\"nav\":[{\"text\":\"工具\",\"activeMatch\":\"/工具/\",\"link\":\"/工具/markdown-examples\"},{\"text\":\"项目部署\",\"activeMatch\":\"/项目部署/\",\"link\":\"/项目部署/vitepress/GithubPages部署\"},{\"text\":\"Python高级编程\",\"activeMatch\":\"/Python高级编程/\",\"link\":\"/Python高级编程/内存管理\"},{\"text\":\"爬虫\",\"activeMatch\":\"/爬虫/\",\"link\":\"/爬虫/抓包\"},{\"text\":\"Linux\",\"activeMatch\":\"/Linux/\",\"link\":\"/Linux/Linux基础入门\"},{\"text\":\"测开\",\"activeMatch\":\"/测开/\",\"link\":\"/测开/unittest\"},{\"text\":\"前端三件套\",\"activeMatch\":\"/前端三件套/\",\"link\":\"/前端三件套/HTML/HTML基础\"},{\"text\":\"八股\",\"activeMatch\":\"/八股/\",\"link\":\"/八股/操作系统/操作系统安全及虚拟化技术概述\"},{\"text\":\"Vue3\",\"activeMatch\":\"/Vue3/\",\"link\":\"/Vue3/axios\"},{\"text\":\"性能测试\",\"activeMatch\":\"/性能测试/\",\"link\":\"/性能测试/基础概念\"}],\"sidebar\":{\"/工具/\":[{\"text\":\"markdown-examples\",\"link\":\"/工具/markdown-examples\"},{\"text\":\"api-examples\",\"link\":\"/工具/api-examples\"},{\"text\":\"Git\",\"collapsed\":false,\"items\":[{\"text\":\"同时推送Gitee和GitHub\",\"link\":\"/工具/Git/同时推送Gitee和GitHub\"},{\"text\":\"Git的基本使用\",\"link\":\"/工具/Git/Git的基本使用\"},{\"text\":\"gitignore\",\"link\":\"/工具/Git/gitignore\"}]},{\"text\":\"漫画-我从11楼跳下\",\"link\":\"/工具/漫画-我从11楼跳下\"}],\"/项目部署/\":[{\"text\":\"vitepress\",\"collapsed\":false,\"items\":[{\"text\":\"GithubPages部署\",\"link\":\"/项目部署/vitepress/GithubPages部署\"},{\"text\":\"netlify部署\",\"link\":\"/项目部署/vitepress/netlify部署\"},{\"text\":\"Nginx部署\",\"link\":\"/项目部署/vitepress/Nginx部署\"}]},{\"text\":\"web\",\"link\":\"/项目部署/web\"}],\"/Python高级编程/\":[{\"text\":\"内存管理\",\"link\":\"/Python高级编程/内存管理\"},{\"text\":\"自省\",\"link\":\"/Python高级编程/自省\"},{\"text\":\"迭代器和生成器\",\"link\":\"/Python高级编程/迭代器和生成器\"},{\"text\":\"练习题\",\"link\":\"/Python高级编程/练习题\"},{\"text\":\"高阶函数\",\"link\":\"/Python高级编程/高阶函数\"},{\"text\":\"闭包和装饰器\",\"link\":\"/Python高级编程/闭包和装饰器\"},{\"text\":\"单例模式\",\"link\":\"/Python高级编程/单例模式\"},{\"text\":\"魔法方法\",\"link\":\"/Python高级编程/魔法方法\"},{\"text\":\"鸭子类型\",\"link\":\"/Python高级编程/鸭子类型\"},{\"text\":\"多进程多线程协程\",\"link\":\"/Python高级编程/多进程多线程协程\"},{\"text\":\"深浅拷贝\",\"link\":\"/Python高级编程/深浅拷贝\"}],\"/爬虫/\":[{\"text\":\"抓包\",\"link\":\"/爬虫/抓包\"},{\"text\":\"导论\",\"link\":\"/爬虫/导论\"},{\"text\":\"bs4解析\",\"link\":\"/爬虫/bs4解析\"},{\"text\":\"xpath解析\",\"link\":\"/爬虫/xpath解析\"},{\"text\":\"登录流程\",\"link\":\"/爬虫/登录流程\"},{\"text\":\"selenium\",\"link\":\"/爬虫/selenium\"},{\"text\":\"scrapy\",\"link\":\"/爬虫/scrapy\"}],\"/Linux/\":[{\"text\":\"Linux基础入门\",\"link\":\"/Linux/Linux基础入门\"}],\"/测开/\":[{\"text\":\"unittest\",\"link\":\"/测开/unittest\"},{\"text\":\"faker数据随机生成\",\"link\":\"/测开/faker数据随机生成\"},{\"text\":\"pytest基础\",\"link\":\"/测开/pytest基础\"},{\"text\":\"yaml文件\",\"link\":\"/测开/yaml文件\"}],\"/前端三件套/\":[{\"text\":\"HTML\",\"collapsed\":false,\"items\":[{\"text\":\"HTML基础\",\"link\":\"/前端三件套/HTML/HTML基础\"}]},{\"text\":\"CSS\",\"collapsed\":false,\"items\":[{\"text\":\"css基础入门\",\"link\":\"/前端三件套/CSS/css基础入门\"},{\"text\":\"flexbox布局\",\"link\":\"/前端三件套/CSS/flexbox布局\"},{\"text\":\"媒体查询\",\"link\":\"/前端三件套/CSS/媒体查询\"},{\"text\":\"动画\",\"link\":\"/前端三件套/CSS/动画\"},{\"text\":\"grid布局\",\"link\":\"/前端三件套/CSS/grid布局\"},{\"text\":\"属性\",\"link\":\"/前端三件套/CSS/属性\"}]},{\"text\":\"实战案例\",\"collapsed\":false,\"items\":[{\"text\":\"聊天页面\",\"link\":\"/前端三件套/实战案例/聊天页面\"}]},{\"text\":\"js\",\"collapsed\":false,\"items\":[{\"text\":\"js入门\",\"link\":\"/前端三件套/js/js入门\"},{\"text\":\"DOM操作\",\"link\":\"/前端三件套/js/DOM操作\"},{\"text\":\"高阶函数\",\"link\":\"/前端三件套/js/高阶函数\"}]},{\"text\":\"面试\",\"collapsed\":false,\"items\":[{\"text\":\"基本题\",\"link\":\"/前端三件套/面试/基本题\"}]}],\"/八股/\":[{\"text\":\"操作系统\",\"collapsed\":false,\"items\":[{\"text\":\"操作系统安全及虚拟化技术概述\",\"link\":\"/八股/操作系统/操作系统安全及虚拟化技术概述\"},{\"text\":\"存储管理\",\"link\":\"/八股/操作系统/存储管理\"},{\"text\":\"操作系统概述及基本概念\",\"link\":\"/八股/操作系统/操作系统概述及基本概念\"},{\"text\":\"文件系统\",\"link\":\"/八股/操作系统/文件系统\"},{\"text\":\"死锁\",\"link\":\"/八股/操作系统/死锁\"},{\"text\":\"输入输出\",\"link\":\"/八股/操作系统/输入输出\"},{\"text\":\"进程与线程\",\"link\":\"/八股/操作系统/进程与线程\"}]},{\"text\":\"汇编\",\"collapsed\":false,\"items\":[{\"text\":\"寄存器\",\"link\":\"/八股/汇编/寄存器\"},{\"text\":\"寻址方式\",\"link\":\"/八股/汇编/寻址方式\"},{\"text\":\"数据传送指令\",\"link\":\"/八股/汇编/数据传送指令\"},{\"text\":\"前置知识\",\"link\":\"/八股/汇编/前置知识\"},{\"text\":\"串指令\",\"link\":\"/八股/汇编/串指令\"},{\"text\":\"宏汇编\",\"link\":\"/八股/汇编/宏汇编\"},{\"text\":\"程序设计综合\",\"link\":\"/八股/汇编/程序设计综合\"},{\"text\":\"逻辑运算与移位指令\",\"link\":\"/八股/汇编/逻辑运算与移位指令\"}]},{\"text\":\"网安\",\"collapsed\":false,\"items\":[{\"text\":\"网络安全\",\"link\":\"/八股/网安/网络安全\"}]}],\"/Vue3/\":[{\"text\":\"axios\",\"link\":\"/Vue3/axios\"},{\"text\":\"面试\",\"link\":\"/Vue3/面试\"}],\"/性能测试/\":[{\"text\":\"基础概念\",\"link\":\"/性能测试/基础概念\"}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>